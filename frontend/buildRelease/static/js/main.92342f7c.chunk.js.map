{"version":3,"sources":["index.js"],"names":["host","httpsHost","wsHost","AddUser","props","send","axios","post","Phone","state","Token","then","res","console","log","request","response","onChange","e","setState","target","value","type","placeholder","onClick","this","React","Component","GetCapsules","get","params","phone","amount","offset","isWatched","GetMessages","capsuleID","CreateCapsule","ToPhones","Content","OpenDate","addParticipate","toPhones","push","phonesTextField","key","length","name","toPhonesNum","phonesTextFields","Chat","connect","websocket","WebSocket","onmessage","data","message","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.92342f7c.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\nimport './index.css'\n\n\n//const host = 'localhost:8000';\nconst host = 'capsules-web-server.herokuapp.com';\nconst httpsHost = 'https://' + host;\nconst wsHost = 'wss://' + host;\n\nclass AddUser extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {Phone: \"\",\n            Token: \"\"}\n    }\n\n    send = () => {\n        axios.post(httpsHost + '/users', {Phone: this.state.Phone, Token: this.state.Token})\n            .then(res => {\n                console.log(res.request.response)\n            })\n    };\n\n    render() {\n        return (\n            <div>\n                <span>Add user:</span>\n                <input onChange={(e) => this.setState({Phone: e.target.value})} type='text' placeholder='phone' />\n                <input onChange={(e) => this.setState({Token: e.target.value})} type='text' placeholder='token' />\n                <button onClick={this.send}>send</button>\n            </div>\n        );\n    }\n}\n\nclass GetCapsules extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {phone: \"\",\n            amount: 0,\n            offset: 0,\n            isWatched: false}\n    }\n\n    send = () => {\n        axios.get(httpsHost + '/capsules',\n            {\n                params: {\n                    phone: this.state.phone,\n                    amount: this.state.amount,\n                    offset: this.state.offset,\n                    isWatched: this.state.isWatched\n                }\n            })\n            .then(res => {\n                console.log(res.request.response)\n            })\n    };\n\n    render() {\n        return (\n            <div>\n                <span>Get capsules:</span>\n                <input onChange={(e) => this.setState({phone: e.target.value})} type='text' placeholder='phone' />\n                <input onChange={(e) => this.setState({amount: +e.target.value})} type='text' placeholder='amount' />\n                <input onChange={(e) => this.setState({offset: +e.target.value})} type='text' placeholder='offset' />\n                <input onChange={(e) => this.setState({isWatched: e.target.value === 'true'})} type='text' placeholder='isWatched' />\n                <button onClick={this.send}>send</button>\n            </div>\n        );\n    }\n}\n\nclass GetMessages extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {phone: \"\",\n            capsuleID: 0,\n            amount: 0,\n            offset: 0}\n    }\n\n    send = () => {\n        axios.get(httpsHost + '/chat',\n            {\n                params: {\n                    phone: this.state.phone,\n                    capsuleID: this.state.capsuleID,\n                    amount: this.state.amount,\n                    offset: this.state.offset\n                }\n            })\n            .then(res => {\n                console.log(res.request.response)\n            })\n    };\n\n    render() {\n        return (\n            <div>\n                <span>Get messages:</span>\n                <input onChange={(e) => this.setState({phone: e.target.value})} type='text' placeholder='phone' />\n                <input onChange={(e) => this.setState({capsuleID: +e.target.value})} type='text' placeholder='capsuleID' />\n                <input onChange={(e) => this.setState({amount: +e.target.value})} type='text' placeholder='amount' />\n                <input onChange={(e) => this.setState({offset: +e.target.value})} type='text' placeholder='offset' />\n                <button onClick={this.send}>send</button>\n            </div>\n        );\n    }\n}\n\nclass CreateCapsule extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {Phone: \"\",\n            Content: \"\",\n            OpenDate: \"\",\n            ToPhones: [\"\"],\n            phonesTextFields: [<li key={0}><input name=\"0\" onChange={(e) => {\n                let toPhones = this.state.ToPhones;\n                toPhones[e.target.name] = e.target.value;\n                this.setState({ToPhones: toPhones})\n            }} type='text' placeholder='toPhone' /></li>],\n            toPhonesNum: 1}\n    }\n\n    send = () => {\n        axios.post(httpsHost + '/capsules',\n            {\n                Phone: this.state.Phone,\n                ToPhones: this.state.ToPhones,\n                Content: this.state.Content,\n                OpenDate: this.state.OpenDate\n            })\n            .then(res => {\n                console.log(res.request.response)\n            })\n    };\n\n    addParticipate = () => {\n        let toPhones = this.state.ToPhones;\n        toPhones.push(\"\");\n\n        let phonesTextField = <li key={this.state.ToPhones.length}><input name={this.state.toPhonesNum} onChange={(e) => {\n            let toPhones = this.state.ToPhones;\n            toPhones[e.target.name] = e.target.value;\n            this.setState({ToPhones: toPhones})\n        }}\n                                         type='text' placeholder='toPhone' /></li>;\n\n        let phonesTextFields = this.state.phonesTextFields;\n        phonesTextFields.push(phonesTextField);\n\n        this.setState({phonesTextFields: phonesTextFields,\n            toPhonesNum: this.state.toPhonesNum + 1,\n            ToPhones: toPhones})\n    };\n\n    render() {\n        return (\n            <div>\n                <span>Create capsule:</span>\n                <input onChange={(e) => this.setState({Phone: e.target.value})} type='text' placeholder='phone' />\n                <input onChange={(e) => this.setState({Content: e.target.value})} type='text' placeholder='content' />\n                <input onChange={(e) => this.setState({OpenDate: e.target.value})} type='text' placeholder='openDate' />\n                <button onClick={this.addParticipate}>add</button>\n                <ul>\n                    {this.state.phonesTextFields}\n                </ul>\n                <button onClick={this.send}>send</button>\n            </div>\n        );\n    }\n}\n\nclass Chat extends React.Component {\n    static websocket = null;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            phone: \"\",\n            capsuleID: \"\",\n            message: \"\"}\n    }\n\n    connect = (capsuleID, phone) => {\n        this.websocket = new WebSocket(wsHost + '/openChatConnection?phone=' + phone + '&capsuleID=' + capsuleID);\n        // this.state.websocket = new WebSocket('wss://capsules-web-server.herokuapp.com/openChatConnection?phone=' + phone + '&capsuleID=' + capsuleID)\n\n        this.websocket.onmessage = (e) => {\n            console.log(e.data)\n        }\n    };\n\n    send = () => {\n        this.websocket.send(this.state.message)\n    };\n\n    render() {\n        return (\n            <div>\n                <span>Open chat connection:</span>\n                <input onChange={(e) => this.setState({capsuleID: e.target.value})} type='text' placeholder='capsuleID' />\n                <input onChange={(e) => this.setState({phone: e.target.value})} type='text' placeholder='phone' />\n                <button onClick={() => this.connect(this.state.capsuleID, this.state.phone)}>connect</button>\n                <br />\n                <span>Message:</span>\n                <input onChange={(e) => this.setState({message: e.target.value})} type='text' placeholder='message' />\n                <button onClick={this.send}>send</button>\n            </div>\n        );\n    }\n}\n\nclass App extends React.Component {\n    render() {\n        return (\n            <div>\n                <AddUser />\n                <GetCapsules />\n                <GetMessages />\n                <CreateCapsule />\n                <Chat />\n            </div>\n        );\n    }\n}\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}